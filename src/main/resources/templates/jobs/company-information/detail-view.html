<!DOCTYPE html>
<html xmlns:th="http:/www.thymeleaf.org"
	  xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta id="_csrf" name="_csrf" th:content="${_csrf.token}"/>
	<meta id="_csrf_header" name="_csrf_header" th:content="${_csrf.headerName}"/>
	<title th:text="${companyDetailInformation.companyName}"></title>
	<link rel="stylesheet" th:href="@{/css/jobs/company-information/company-information.css}">
</head>
<body>
    <div th:replace="common/header.html"></div>
	<div id="container">
		<div class="content">
			<div class="info_header">
				<div>
					<img th:if="${companyDetailInformation.companyInformation.attachment == null}" th:src="@{/images/common/no-logo.png}" alt="기본 로고">
					<img th:unless="${companyDetailInformation.companyInformation.attachment == null}" th:src="@{${companyDetailInformation.companyInformation.attachment.filePath} + ${companyDetailInformation.companyInformation.attachment.changeName}}" th:alt="${companyDetailInformation.companyName} + ' 로고'">
					<h2 th:text="${companyDetailInformation.companyName}"></h2>
					<th:block th:if="${#authorization.expression('isAnonymous()') or #authorization.expression('hasRole(''PERSONAL'')')}">
						<button type="button" class="like_button" th:classappend="${(#authorization.expression('isAnonymous()') ? 'login_button' : '') + (#strings.equals(companyDetailInformation.interestedCompany, 'Y') ? 'active':'')}" th:attr="data-company-no=${companyDetailInformation.companyInformation.no}">관심기업 등록
							<span class="blind">
								<span th:if="${#strings.equals(companyDetailInformation.interestedCompany, 'Y')}" th:remove="tag">해제</span>
								<span th:unless="${#strings.equals(companyDetailInformation.interestedCompany, 'Y')}" th:remove="tag">설정</span>
							</span>
							<span class="count" th:text="${companyDetailInformation.interestedCount}"></span>
						</button>
					</th:block>
				</div>
			</div>
			<div class="floating-navi">
				<div class="floating-navi-inner">
					<ul>
						<li class="active" data-target="company_info">기업소개</li>
						<li data-target="progressing">인재채용</li>
						<li data-target="expired">지난채용</li>
					</ul>
				</div>
			</div>
			<div class="information">
				<div class="company_info">
					<h3>기업소개</h3>
					<div class="summary">
						<ul>
							<li>
								<span>설립일</span>
								<span th:if="${companyDetailInformation.companyInformation.foundingDate != null}" th:text="${#dates.format(companyDetailInformation.companyInformation.foundingDate, 'yyyy년 M월 d일 설립')}"></span>
								<span th:unless="${companyDetailInformation.companyInformation.foundingDate != null}">-</span>
							</li>
							<li>
								<span>기업형태</span>
								<span th:text="${companyDetailInformation.companyInformation.companyType.name}"></span>
							</li>
							<li>
								<span>사원수</span>
								<span th:if="${companyDetailInformation.companyInformation.employeeNumber != 0}" th:text="${companyDetailInformation.companyInformation.employeeNumber} + '명'"></span>
								<span th:unless="${companyDetailInformation.companyInformation.employeeNumber != 0}">-</span>
							</li>
						</ul>
					</div>
					<div class="company_detail">
						<th:block th:if="${not #strings.isEmpty(companyDetailInformation.companyInformation.companyHistory)}">
						<div>
							<h4>연혁 및 실적</h4>
							<p th:utext="${#strings.replace(companyDetailInformation.companyInformation.companyHistory, newLineChar, '&lt;br /&gt;')}"></p>
						</div>
						</th:block>
						<th:block th:if="${not #strings.isEmpty(companyDetailInformation.companyInformation.companyVision)}">
						<div>
							<h4>기업 개요 및 비전</h4>
							<p th:utext="${#strings.replace(companyDetailInformation.companyInformation.companyVision, newLineChar, '&lt;br /&gt;')}"></p>
						</div>
						</th:block>
					</div>
					<div class="company_addional_info">
						<ul>
							<li><span class="title">업종</span>[[${companyDetailInformation.companyInformation.sector.name}]]</li>
							<li><span class="title">홈페이지</span><a th:href="${companyDetailInformation.companyInformation.homepage}" th:text="${companyDetailInformation.companyInformation.homepage}"></a></li>
							<li><span class="title">기업주소</span>[[${companyDetailInformation.address}]]</li>
							<li><span class="title">사업내용</span>[[${companyDetailInformation.companyInformation.businessDetail}]]</li>
						</ul>
					</div>
				</div>
				<div class="job_vacancy_table progressing">
					<h3>인재채용</h3>
					<div>
						<input type="hidden" class="page" id="progressing_page" value="1">
						<input type="hidden" class="company_information_no" th:value="${companyDetailInformation.companyInformation.no}">
						<table th:classappend="${#lists.size(companyDetailInformation.progressingJobVacancyData.jobVacancyList) == 0 ? 'empty_result' : ''}">
							<thead>
								<tr>
									<th scope="col">공고명</th>
									<th scope="col">공고요약</th>
									<th scope="col">기한</th>
									<th scope="col">입사지원</th>
								</tr>
							</thead>
							<tbody>
								<th:block th:if="${#lists.size(companyDetailInformation.progressingJobVacancyData.jobVacancyList) == 0}">
								<tr>
									<td colspan="4">진행중인 공고가 존재하지 않습니다.</td>
								</tr>
								</th:block>
								<th:block th:unless="${#lists.size(companyDetailInformation.progressingJobVacancyData.jobVacancyList) == 0}">
									<tr th:each="jobVacancy : ${companyDetailInformation.progressingJobVacancyData.jobVacancyList}" >
										<td><a th:href="@{/jobs/vacancy-detail/detail-view?no=} + ${jobVacancy.no}" th:text="${jobVacancy.title}"></a></td>
										<td>
											<span th:each="experienceLevel : ${jobVacancy.experienceLevelList}" th:text="${experienceLevel.name} + (${experienceLevelStat.size-1 > experienceLevelStat.index} ? ', ' : '')" th:remove="tag"></span>
											| <span th:text="${jobVacancy.educationLevel.name}" th:remove="tag"></span>
										<td th:text="'~' + ${#dates.format(jobVacancy.periodEnd, 'M/d (E)')}"></td>
										<td><button type="button" class="green">입사지원</button></td>
									</tr>
								</th:block>
							</tbody>
						</table>
						<th:block th:unless="${#lists.size(companyDetailInformation.progressingJobVacancyData.jobVacancyList) == 0}">
						<ul class="paging" th:with="pi=${companyDetailInformation.progressingJobVacancyData.pageInfo}">
							<li class="max_prev"><button type="button" data-page="1" disabled>&lt;&lt;</button></li>
							<li class="prev"><button type="button" data-page="1" disabled>&lt;</button></li>
							<li class="page_number">
								<ul>
									<li th:each="p : ${#numbers.sequence(pi.startPage, pi.endPage)}">
										<button th:classappend="${p == pi.page ? 'current_page' : ''}" th:text="${p}" th:attr="data-page=${p}"></button>
									</li>
								</ul>
							</li>
							<li class="next"><button type="button" th:attr="data-page=${pi.page+1}" th:disabled="${pi.page == pi.maxPage}">&gt;</button></li>
							<li class="max_next"><button type="button" th:attr="data-page=${pi.maxPage}" th:disabled="${pi.page == pi.maxPage}">&gt;&gt;</button></li>	
						</ul>
						</th:block>
					</div>
				</div>
				<div class="job_vacancy_table expired">
					<h3>지난채용</h3>
					<div>
						<input type="hidden" class="page" id="expired_page" value="1">
						<input type="hidden" class="company_information_no" th:value="${companyDetailInformation.companyInformation.no}">
						<table th:classappend="${#lists.size(companyDetailInformation.expiredJobVacancyData.jobVacancyList) == 0 ? 'empty_result' : ''}">
							<thead>
								<tr>
									<th scope="col">공고명</th>
									<th scope="col">공고요약</th>
									<th scope="col">기한</th>
									<th scope="col">입사지원</th>
								</tr>
							</thead>
							<tbody>
								<th:block th:if="${#lists.size(companyDetailInformation.expiredJobVacancyData.jobVacancyList) == 0}">
								<tr>
									<td colspan="4">지난 채용 공고가 존재하지 않습니다.</td>
								</tr>
								</th:block>
								<th:block th:unless="${#lists.size(companyDetailInformation.expiredJobVacancyData.jobVacancyList) == 0}">
									<tr th:each="jobVacancy : ${companyDetailInformation.expiredJobVacancyData.jobVacancyList}" >
										<td><a th:href="@{/jobs/vacancy-detail/detail-view?no=} + ${jobVacancy.no}" th:text="${jobVacancy.title}"></a></td>
										<td>
											<span th:each="experienceLevel : ${jobVacancy.experienceLevelList}" th:text="${experienceLevel.name} + (${experienceLevelStat.size-1 > experienceLevelStat.index} ? ', ' : '')" th:remove="tag"></span>
											| <span th:text="${jobVacancy.educationLevel.name}" th:remove="tag"></span>
										<td th:text="'~' + ${#dates.format(jobVacancy.periodEnd, 'M/d (E)')}"></td>
										<td><button type="button" class="closed">마감</button></td>
									</tr>
								</th:block>
							</tbody>
						</table>
						<th:block th:unless="${#lists.size(companyDetailInformation.expiredJobVacancyData.jobVacancyList) == 0}">
						<ul class="paging" th:with="pi=${companyDetailInformation.expiredJobVacancyData.pageInfo}">
							<li class="max_prev"><button type="button" data-page="1" disabled>&lt;&lt;</button></li>
							<li class="prev"><button type="button" data-page="1" disabled>&lt;</button></li>
							<li class="page_number">
								<ul>
									<li th:each="p : ${#numbers.sequence(pi.startPage, pi.endPage)}">
										<button th:classappend="${p == pi.page ? 'current_page' : ''}" th:text="${p}" th:attr="data-page=${p}"></button>
									</li>
								</ul>
							</li>
							<li class="next"><button type="button" th:attr="data-page=${pi.page+1}" th:disabled="${pi.page == pi.maxPage}">&gt;</button></li>
							<li class="max_next"><button type="button" th:attr="data-page=${pi.maxPage}" th:disabled="${pi.page == pi.maxPage}">&gt;&gt;</button></li>	
						</ul>
						</th:block>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script th:src="@{/js/jobs/company-information/company-information.js}"></script>
    <div th:replace="common/footer.html"></div>
</body>
</html>